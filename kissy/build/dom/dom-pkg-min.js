/*
Copyright 2010, KISSY UI Library v1.1.2dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("dom",function(c,s){function p(u,m){return u&&u.nodeType===m}c.DOM={_isElementNode:function(u){return p(u,1)},_isKSNode:function(u){return c.Node&&p(u,c.Node.TYPE)},_getWin:function(u){return u&&"scrollTo"in u&&u.document?u:p(u,9)?u.defaultView||u.parentWindow:u===s?window:false},_nodeTypeIs:p}});
KISSY.add("selector",function(c,s){function p(a,b){var e,g=[],q,y;b=u(b);if(c.isString(a)){a=c.trim(a);if(B.test(a)){if(a=m(a.slice(1),b))g=[a]}else if(e=r.exec(a)){q=e[1];y=e[2];e=e[3];if(b=q?m(q,b):b)if(e)if(!q||a.indexOf(k)!==-1)g=j(e,y,b);else{if((a=m(q,b))&&v.hasClass(a,e))g=[a]}else if(y)g=C(y,b)}else if(c.ExternalSelector)return c.ExternalSelector(a,b);else f(a)}else if(a&&(a[t]||a[x]))g=a[t]?[a[t]()]:a[x]();else if(a&&(c.isArray(a)||a.item))g=a;else if(a)g=[a];if(g.item)g=c.makeArray(g);g.each=
function(n,l){return c.each(g,n,l)};return g}function u(a){if(a===s)a=h;else if(c.isString(a)&&B.test(a))a=m(a.slice(1),h);else if(a&&a.nodeType!==1&&a.nodeType!==9)a=null;return a}function m(a,b){if(b.nodeType!==9)b=b.ownerDocument;return b.getElementById(a)}function C(a,b){return b.getElementsByTagName(a)}function j(a,b,e){e=a=e.getElementsByClassName(a);var g=0,q=0,y=a.length,n;if(b&&b!==o){e=[];for(b=b.toUpperCase();g<y;++g){n=a[g];if(n.tagName===b)e[q++]=n}}return e}function f(a){c.error("Unsupported selector: "+
a)}var h=document,v=c.DOM,k=" ",o="*",t="getDOMNode",x=t+"s",B=/^#[\w-]+$/,r=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/;(function(){var a=h.createElement("div");a.appendChild(h.createComment(""));if(a.getElementsByTagName(o).length>0)C=function(b,e){e=e.getElementsByTagName(b);if(b===o){b=[];for(var g=0,q=0,y;y=e[g++];)if(y.nodeType===1)b[q++]=y;e=b}return e}})();h.getElementsByClassName||(j=h.querySelectorAll?function(a,b,e){return e.querySelectorAll((b?b:"")+"."+a)}:function(a,b,e){b=e.getElementsByTagName(b||
o);e=[];var g=0,q=0,y=b.length,n,l;for(a=k+a+k;g<y;++g){n=b[g];if((l=n.className)&&(k+l+k).indexOf(a)>-1)e[q++]=n}return e});c.query=p;c.get=function(a,b){return p(a,b)[0]||null};c.mix(v,{query:p,get:c.get,filter:function(a,b){var e=p(a),g,q,y,n=[];if(c.isString(b)&&(g=r.exec(b))&&!g[1]){q=g[2];y=g[3];b=function(l){return!(q&&l.tagName!==q.toUpperCase()||y&&!v.hasClass(l,y))}}if(c.isFunction(b))n=c.filter(e,b);else if(b&&c.ExternalSelector)n=c.ExternalSelector._filter(a,b);else f(b);return n},test:function(a,
b){a=p(a);return v.filter(a,b).length===a.length}})});
KISSY.add("dom-class",function(c,s){function p(j,f,h,v){if(!(f=c.trim(f)))return v?false:s;j=c.query(j);var k=0,o=j.length;f=f.split(m);for(var t;k<o;k++){t=j[k];if(u._isElementNode(t)){t=h(t,f,f.length);if(t!==s)return t}}if(v)return false}var u=c.DOM,m=/[\.\s]\s*\.?/,C=/[\n\t]/g;c.mix(u,{hasClass:function(j,f){return p(j,f,function(h,v,k){if(h=h.className){h=" "+h+" ";for(var o=0,t=true;o<k;o++)if(h.indexOf(" "+v[o]+" ")<0){t=false;break}if(t)return true}},true)},addClass:function(j,f){p(j,f,function(h,
v,k){var o=h.className;if(o){var t=" "+o+" ";o=o;for(var x=0;x<k;x++)if(t.indexOf(" "+v[x]+" ")<0)o+=" "+v[x];h.className=c.trim(o)}else h.className=f})},removeClass:function(j,f){p(j,f,function(h,v,k){var o=h.className;if(o)if(k){o=(" "+o+" ").replace(C," ");for(var t=0,x;t<k;t++)for(x=" "+v[t]+" ";o.indexOf(x)>=0;)o=o.replace(x," ");h.className=c.trim(o)}else h.className=""})},replaceClass:function(j,f,h){u.removeClass(j,f);u.addClass(j,h)},toggleClass:function(j,f,h){var v=c.isBoolean(h),k;p(j,
f,function(o,t,x){for(var B=0,r;B<x;B++){r=t[B];k=v?!h:u.hasClass(o,r);u[k?"removeClass":"addClass"](o,r)}})}})});
KISSY.add("dom-attr",function(c,s){function p(r,a){return a&&a.nodeName.toUpperCase()===r.toUpperCase()}var u=c.UA,m=u.ie,C=m&&m<8,j=document.documentElement.textContent!==s?"textContent":"innerText",f=c.DOM,h=f._isElementNode,v=function(r){return f._nodeTypeIs(r,3)},k=/href|src|style/,o=/href|src|colspan|rowspan/,t=/\r/g,x=/radio|checkbox/,B={readonly:"readOnly"};C&&c.mix(B,{"for":"htmlFor","class":"className"});c.mix(f,{attr:function(r,a,b){if(c.isPlainObject(a))for(var e in a)f.attr(r,e,a[e]);
else if(a=c.trim(a)){a=a.toLowerCase();a=B[a]||a;if(b===s){r=c.get(r);if(!h(r))return s;var g;k.test(a)||(g=r[a]);if(g===s)g=r.getAttribute(a);if(C)if(o.test(a))g=r.getAttribute(a,2);else if(a==="style")g=r.style.cssText;return g===null?s:g}c.each(c.query(r),function(q){if(h(q))if(a==="style")q.style.cssText=b;else{if(a==="checked")q[a]=!!b;q.setAttribute(a,""+b)}})}},removeAttr:function(r,a){c.each(c.query(r),function(b){if(h(b)){f.attr(b,a,"");b.removeAttribute(a)}})},val:function(r,a){if(a===s){var b=
c.get(r);if(!h(b))return s;if(p("option",b))return(b.attributes.value||{}).specified?b.value:b.text;if(p("select",b)){var e=b.selectedIndex;r=b.options;if(e<0)return null;else if(b.type==="select-one")return f.val(r[e]);b=[];for(var g=0,q=r.length;g<q;++g)r[g].selected&&b.push(f.val(r[g]));return b}if(u.webkit&&x.test(b.type))return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(t,"")}c.each(c.query(r),function(y){if(p("select",y)){if(c.isNumber(a))a+="";var n=c.makeArray(a),
l=y.options,z;g=0;for(q=l.length;g<q;++g){z=l[g];z.selected=c.inArray(f.val(z),n)}if(!n.length)y.selectedIndex=-1}else if(h(y))y.value=a})},text:function(r,a){if(a===s){r=c.get(r);if(h(r))return r[j]||"";else if(v(r))return r.nodeValue}else c.each(c.query(r),function(b){if(h(b))b[j]=a;else if(v(b))b.nodeValue=a})}})});
KISSY.add("dom-style",function(c,s){function p(a,b){var e=c.get(a),g=b===h?e.offsetWidth:e.offsetHeight;c.each(b===h?["Left","Right"]:["Top","Bottom"],function(q){g-=parseFloat(m._getComputedStyle(e,"padding"+q))||0;g-=parseFloat(m._getComputedStyle(e,"border"+q+"Width"))||0});return g}function u(a,b,e){var g=e;if(e===v&&o.test(b)){g=0;if(m.css(a,"position")==="absolute"){e=a[b==="left"?"offsetLeft":"offsetTop"];if(C.ie===8||C.opera)e-=k(m.css(a.offsetParent,"border-"+b+"-width"))||0;g=e-(k(m.css(a,
"margin-"+b))||0)}}return g}var m=c.DOM,C=c.UA,j=document,f=j.documentElement,h="width",v="auto",k=parseInt,o=/^left|top$/,t=/width|height|top|left|right|bottom|margin|padding/i,x=/-([a-z])/ig,B=function(a,b){return b.toUpperCase()},r={};c.mix(m,{_CUSTOM_STYLES:r,_getComputedStyle:function(a,b){var e="",g=a.ownerDocument;if(a.style)e=g.defaultView.getComputedStyle(a,null)[b];return e},css:function(a,b,e){if(c.isPlainObject(b))for(var g in b)m.css(a,g,b[g]);else{if(b.indexOf("-")>0)b=b.replace(x,B);
b=r[b]||b;if(e===s){a=c.get(a);g="";if(a&&a.style){g=b.get?b.get(a):a.style[b];if(g===""&&!b.get)g=u(a,b,m._getComputedStyle(a,b))}return g===s?"":g}else{if(e===null||e==="")e="";else if(!isNaN(new Number(e))&&t.test(b))e+="px";(b===h||b==="height")&&parseFloat(e)<0||c.each(c.query(a),function(q){if(q&&q.style){b.set?b.set(q,e):(q.style[b]=e);if(e==="")q.style.cssText||q.removeAttribute("style")}})}}},width:function(a,b){if(b===s)return p(a,h);else m.css(a,h,b)},height:function(a,b){if(b===s)return p(a,
"height");else m.css(a,"height",b)},addStyleSheet:function(a,b){var e;if(b)e=c.get(b);e||(e=m.create("<style>",{id:b}));c.get("head").appendChild(e);if(e.styleSheet)e.styleSheet.cssText=a;else e.appendChild(j.createTextNode(a))}});if(f.style.cssFloat!==s)r["float"]="cssFloat";else if(f.style.styleFloat!==s)r["float"]="styleFloat"});
KISSY.add("dom-style-ie",function(c,s){if(c.UA.ie){var p=c.DOM,u=document,m=u.documentElement,C=p._CUSTOM_STYLES,j=/^-?\d+(?:px)?$/i,f=/^-?\d/,h=/^width|height$/;try{if(m.style.opacity===s&&m.filters)C.opacity={get:function(k){var o=100;try{o=k.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(t){try{o=k.filters("alpha").opacity}catch(x){}}return o/100+""},set:function(k,o){k=k.style;k.zoom=1;k.filter="alpha(opacity="+o*100+")"}}}catch(v){c.log("IE filters ActiveX is disabled. ex = "+v)}if(!(u.defaultView||
{}).getComputedStyle&&m.currentStyle)p._getComputedStyle=function(k,o){var t=k.style,x=k.currentStyle[o];if(h.test(o))x=p[o](k)+"px";else if(!j.test(x)&&f.test(x)){var B=t.left,r=k.runtimeStyle.left;k.runtimeStyle.left=k.currentStyle.left;t.left=o==="fontSize"?"1em":x||0;x=t.pixelLeft+"px";t.left=B;k.runtimeStyle.left=r}return x}}});
KISSY.add("dom-offset",function(c,s){function p(n){var l=0,z=0,d=k(n[a]);if(n[y]){n=n[y]();l=n[b];z=n[e];if(C.mobile!=="apple"){l+=m[g](d);z+=m[q](d)}}return{left:l,top:z}}function u(n,l){if(m.css(n,B)==="static")n.style[B]=r;var z=p(n),d={},i,w;for(w in l){i=x(m.css(n,w),10)||0;d[w]=i+l[w]-z[w]}m.css(n,d)}var m=c.DOM,C=c.UA,j=window,f=document,h=m._isElementNode,v=m._nodeTypeIs,k=m._getWin,o=f.compatMode==="CSS1Compat",t=Math.max,x=parseInt,B="position",r="relative",a="ownerDocument",b="left",e=
"top",g="scrollLeft",q="scrollTop",y="getBoundingClientRect";c.mix(m,{offset:function(n,l){if(!(n=c.get(n))||!n[a])return null;if(l===s)return p(n);u(n,l)},scrollIntoView:function(n,l,z,d){if((n=c.get(n))&&n[a]){d=d===s?true:!!d;z=z===s?true:!!z;if(!l||l===j)return n.scrollIntoView(z);l=c.get(l);if(v(l,9))l=k(l);var i=l&&"scrollTo"in l&&l.document,w=m.offset(n),A=i?{left:m.scrollLeft(l),top:m.scrollTop(l)}:m.offset(l),D={left:w[b]-A[b],top:w[e]-A[e]};w=i?m.viewportHeight(l):l.clientHeight;A=i?m.viewportWidth(l):
l.clientWidth;var G=m[g](l),E=m[q](l),F=G+A,M=E+w,I=n.offsetHeight;n=n.offsetWidth;var H=D.left+G-(x(m.css(l,"borderLeftWidth"))||0);D=D.top+E-(x(m.css(l,"borderTopWidth"))||0);var N=H+n,J=D+I,K,L;if(I>w||D<E||z)K=D;else if(J>M)K=J-w;if(d)if(n>A||H<G||z)L=H;else if(N>F)L=N-A;if(i){if(K!==s||L!==s)l.scrollTo(L,K)}else{if(K!==s)l[q]=K;if(L!==s)l[g]=L}}}});c.each(["Left","Top"],function(n,l){var z="scroll"+n;m[z]=function(d){var i=0,w=k(d),A;if(w&&(A=w.document))i=w[l?"pageYOffset":"pageXOffset"]||A.documentElement[z]||
A.body[z];else if(h(d=c.get(d)))i=d[z];return i}});c.each(["Width","Height"],function(n){m["doc"+n]=function(l){l=l||f;return t(o?l.documentElement["scroll"+n]:l.body["scroll"+n],m["viewport"+n](l))};m["viewport"+n]=function(l){var z="inner"+n;l=k(l);var d=l.document;return z in l?l[z]:o?d.documentElement["client"+n]:d.body["client"+n]}})});
KISSY.add("dom-traversal",function(c,s){function p(j,f,h,v){if(!(j=c.get(j)))return null;if(f===s)f=1;var k=null,o,t;if(c.isNumber(f)&&f>=0){if(f===0)return j;o=0;t=f;f=function(){return++o===t}}for(;j=j[h];)if(C(j)&&(!f||m.test(j,f))&&(!v||v(j))){k=j;break}return k}function u(j,f,h){var v=[];var k=j=c.get(j);if(j&&h)k=j.parentNode;if(k){h=0;for(k=k.firstChild;k;k=k.nextSibling)if(C(k)&&k!==j&&(!f||m.test(k,f)))v[h++]=k}return v}var m=c.DOM,C=m._isElementNode;c.mix(m,{parent:function(j,f){return p(j,
f,"parentNode",function(h){return h.nodeType!=11})},next:function(j,f){return p(j,f,"nextSibling")},prev:function(j,f){return p(j,f,"previousSibling")},siblings:function(j,f){return u(j,f,true)},children:function(j,f){return u(j,f)},contains:function(j,f){var h=false;if((j=c.get(j))&&(f=c.get(f)))if(j.contains)return j.contains(f);else if(j.compareDocumentPosition)return!!(j.compareDocumentPosition(f)&16);else for(;!h&&(f=f.parentNode);)h=f==j;return h}})});
KISSY.add("dom-create",function(c,s){function p(d,i){t(d)&&c.isPlainObject(i)&&h.attr(d,i);return d}function u(d,i){var w=null,A;if(d&&(d.push||d.item)&&d[0]){i=i||d[0].ownerDocument;w=i.createDocumentFragment();if(d.item)d=c.makeArray(d);i=0;for(A=d.length;i<A;i++)w.appendChild(d[i])}else c.log("Unable to convert "+d+" to fragment.");return w}function m(d){var i=d.cloneNode(true);if(v.ie<8)i.innerHTML=d.innerHTML;return i}function C(d,i,w,A){if(w){var D=c.guid("ks-tmp-"),G=new RegExp(a);i+='<span id="'+
D+'"></span>';c.available(D,function(){var E=c.get("head"),F,M,I,H,N,J;for(G.lastIndex=0;F=G.exec(i);)if((I=(M=F[1])?M.match(e):false)&&I[2]){F=f.createElement("script");F.src=I[2];if((H=M.match(g))&&H[2])F.charset=H[2];F.async=true;E.appendChild(F)}else if((J=F[2])&&J.length>0)c.globalEval(J);(N=f.getElementById(D))&&h.remove(N);c.isFunction(A)&&A()});j(d,i)}else{j(d,i);c.isFunction(A)&&A()}}function j(d,i){i=(i+"").replace(a,"");try{d.innerHTML=i}catch(w){for(;d.firstChild;)d.removeChild(d.firstChild);
i&&d.appendChild(h.create(i))}}var f=document,h=c.DOM,v=c.UA,k=v.ie,o=h._nodeTypeIs,t=h._isElementNode,x=h._isKSNode,B=f.createElement("div"),r=/<(\w+)/,a=/<script([^>]*)>([\s\S]*?)<\/script>/ig,b=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,e=/\ssrc=(['"])(.*?)\1/i,g=/\scharset=(['"])(.*?)\1/i;c.mix(h,{create:function(d,i,w){if(o(d,1)||o(d,3))return m(d);if(x(d))return m(d[0]);if(!(d=c.trim(d)))return null;var A=null;A=h._creators;var D,G="div",E;if(D=b.exec(d))A=(w||f).createElement(D[1]);else{if((D=r.exec(d))&&
(E=D[1])&&c.isFunction(A[E=E.toLowerCase()]))G=E;d=A[G](d,w).childNodes;A=d.length===1?d[0].parentNode.removeChild(d[0]):u(d,w||f)}return p(A,i)},_creators:{div:function(d,i){i=i?i.createElement("div"):B;i.innerHTML=d;return i}},html:function(d,i,w,A){if(i===s){d=c.get(d);if(t(d))return d.innerHTML}else c.each(c.query(d),function(D){t(D)&&C(D,i,w,A)})},remove:function(d){c.each(c.query(d),function(i){t(i)&&i.parentNode&&i.parentNode.removeChild(i)})}});if(v.gecko||k){var q=h._creators,y=h.create,
n=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,l={option:"select",td:"tr",tr:"tbody",tbody:"table",col:"colgroup",legend:"fieldset"};for(var z in l)(function(d){q[z]=function(i,w){return y("<"+d+">"+i+"</"+d+">",null,w)}})(l[z]);if(k){q.script=function(d,i){i=i?i.createElement("div"):B;i.innerHTML="-"+d;i.removeChild(i.firstChild);return i};if(k<8)q.tbody=function(d,i){i=y("<table>"+d+"</table>",null,i);var w=i.children.tags("tbody")[0];i.children.length>1&&w&&!n.test(d)&&w.parentNode.removeChild(w);
return i}}c.mix(q,{optgroup:q.option,th:q.td,thead:q.tbody,tfoot:q.tbody,caption:q.tbody,colgroup:q.tbody})}});KISSY.add("dom-insertion",function(c){c.mix(c.DOM,{insertBefore:function(s,p){if((s=c.get(s))&&(p=c.get(p))&&p.parentNode)p.parentNode.insertBefore(s,p);return s},insertAfter:function(s,p){if((s=c.get(s))&&(p=c.get(p))&&p.parentNode)p.nextSibling?p.parentNode.insertBefore(s,p.nextSibling):p.parentNode.appendChild(s);return s}})});
