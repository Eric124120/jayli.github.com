/*
Copyright 2010, KISSY UI Library v1.1.2dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("node",function(a){function f(b,g,k){var j;if(!(this instanceof f))return new f(b,g,k);if(b){if(c(b,1)||c(b,3))j=b;else if(a.isString(b))j=p.create(b,g,k);this[0]=j}else this.length=0}var p=a.DOM,c=p._nodeTypeIs;f.TYPE="-ks-Node";a.augment(f,{length:1,getDOMNode:function(){return this[0]},nodeType:f.TYPE});a.one=function(b,g){return(b=a.get(b,g))?new f(b):null};a.Node=f});
KISSY.add("nodelist",function(a){function f(b){if(!(this instanceof f))return new f(b);c.push.apply(this,b||[])}var p=a.DOM,c=Array.prototype;a.mix(f.prototype,{length:0,item:function(b){var g=null;if(p._isElementNode(this[b]))g=new a.Node(this[b]);return g},getDOMNodes:function(){return c.slice.call(this)},each:function(b,g){var k=this.length,j=0,l;for(l=new a.Node(this[0]);j<k&&b.call(g||l,l,j,this)!==false;l=new a.Node(this[++j]));return this}});a.all=function(b,g){return new f(a.query(b,g,true))};
a.NodeList=f});
KISSY.add("node-attach",function(a,f){function p(d,arguments,e,h){var n=[this[d?r:l]()].concat(a.makeArray(arguments));if(arguments[e]===f)return h.apply(b,n);else{h.apply(b,n);return this}}function c(d,e){a.each(d,function(h){a.each([k,j],function(n,i){n[h]=function(o){switch(e){case s:return function(){return p.call(this,i,arguments,1,o)};case q:return function(){return p.call(this,i,arguments,0,o)};case t:return function(){var m=this[i?r:l]();return(m=o.apply(b,[m].concat(a.makeArray(arguments))))?new (a[a.isArray(m)?
"NodeList":"Node"])(m):null};default:return function(){var m=this[i?r:l]();m=o.apply(b,[m].concat(a.makeArray(arguments)));return m===f?this:m}}}(b[h])})})}var b=a.DOM,g=a.Event,k=a.Node.prototype,j=a.NodeList.prototype,l="getDOMNode",r=l+"s",s=1,q=2,t=4;a.mix(k,{one:function(d){return a.one(d,this[0])},all:function(d){return a.all(d,this[0])}});c(["hasClass","addClass","removeClass","replaceClass","toggleClass"]);c(["attr","removeAttr"],s);c(["val","text"],q);c(["css"],s);c(["width","height"],q);
c(["offset"],q);c(["scrollIntoView"]);c(["parent","next","prev","siblings","children"],t);c(["contains"]);c(["html"],q);c(["remove"]);a.each(["insertBefore","insertAfter"],function(d){k[d]=function(e){b[d].call(b,this[0],e);return this}});a.each([k,j],function(d){a.mix(d,{append:function(e){e&&a.each(this,function(h){h.appendChild(b.create(e))});return this},appendTo:function(e){if((e=a.get(e))&&e.appendChild)a.each(this,function(h){e.appendChild(h)});return this}})});a.each([k,j],function(d){a.mix(d,
a.EventTarget,{_supportSpecialEvent:true});d._addEvent=function(e,h,n){for(var i=0,o=this.length;i<o;i++)g._simpleAdd(this[i],e,h,n)};d._removeEvent=function(e,h,n){for(var i=0,o=this.length;i<o;i++)g._simpleRemove(this[i],e,h,n)};delete d.fire})});
